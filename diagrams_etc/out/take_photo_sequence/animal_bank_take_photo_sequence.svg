<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="864px" preserveAspectRatio="none" style="width:1143px;height:864px;" version="1.1" viewBox="0 0 1143 864" width="1143px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="853.3652" style="stroke:#000000;stroke-width:1.0;" width="1132.5" x="5" y="5"/><path d="M196,5 L196,14.4883 L186,24.4883 L5,24.4883 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="8" y="19.5352">Sequence: Capture Animal</text><rect fill="#FFFFFF" height="72.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="181.5" y="142.2871"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="358" y="629.502"/><rect fill="#FFFFFF" height="14" style="stroke:#A80036;stroke-width:1.0;" width="10" x="358" y="818.3652"/><rect fill="#FFFFFF" height="43.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="534.5" y="171.5977"/><rect fill="#FFFFFF" height="56.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="534.5" y="315.8398"/><rect fill="#FFFFFF" height="14" style="stroke:#A80036;stroke-width:1.0;" width="10" x="534.5" y="556.8809"/><rect fill="#FFFFFF" height="119.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="706.5" y="252.2188"/><rect fill="#FFFFFF" height="48.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="859.5" y="522.5703"/><rect fill="#FFFFFF" height="48.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1018" y="784.0547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="28" x2="28" y1="110.9766" y2="850.3652"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="186" x2="186" y1="110.9766" y2="850.3652"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="363" x2="363" y1="482.5156" y2="850.3652"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="539" x2="539" y1="110.9766" y2="850.3652"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="711.5" x2="711.5" y1="110.9766" y2="850.3652"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="864.5" x2="864.5" y1="110.9766" y2="850.3652"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1022.5" x2="1022.5" y1="110.9766" y2="850.3652"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="10" y="108.0234">User</text><ellipse cx="28.5" cy="41.4883" fill="#FEFECE" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M28.5,49.4883 L28.5,76.4883 M15.5,57.4883 L41.5,57.4883 M28.5,76.4883 L15.5,91.4883 M28.5,76.4883 L41.5,91.4883 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="177" x="98" y="79.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="105" y="100.0234">CaptureImageFragment</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="177" x="451" y="79.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="458" y="100.0234">CameraParentFragment</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="76" x="673.5" y="79.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="680.5" y="100.0234">CameraX</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="210" x="759.5" y="79.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="766.5" y="100.0234">FusedLocationProviderClient</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="87" x="979.5" y="79.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="986.5" y="100.0234">Repository</text><rect fill="#FFFFFF" height="72.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="181.5" y="142.2871"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="358" y="629.502"/><rect fill="#FFFFFF" height="14" style="stroke:#A80036;stroke-width:1.0;" width="10" x="358" y="818.3652"/><rect fill="#FFFFFF" height="43.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="534.5" y="171.5977"/><rect fill="#FFFFFF" height="56.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="534.5" y="315.8398"/><rect fill="#FFFFFF" height="14" style="stroke:#A80036;stroke-width:1.0;" width="10" x="534.5" y="556.8809"/><rect fill="#FFFFFF" height="119.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="706.5" y="252.2188"/><rect fill="#FFFFFF" height="48.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="859.5" y="522.5703"/><rect fill="#FFFFFF" height="48.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1018" y="784.0547"/><polygon fill="#A80036" points="169.5,138.2871,179.5,142.2871,169.5,146.2871,173.5,142.2871" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="28.5" x2="175.5" y1="142.2871" y2="142.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="35.5" y="137.5449">Clicks shutter button</text><polygon fill="#A80036" points="522.5,167.5977,532.5,171.5977,522.5,175.5977,526.5,171.5977" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="191.5" x2="528.5" y1="171.5977" y2="171.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="198.5" y="166.8555">onCaptureImagePressed()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="709.5" x2="699.5" y1="200.9082" y2="196.9082"/><line style="stroke:#A80036;stroke-width:1.0;" x1="709.5" x2="699.5" y1="200.9082" y2="204.9082"/><line style="stroke:#A80036;stroke-width:1.0;" x1="544.5" x2="710.5" y1="200.9082" y2="200.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="551.5" y="196.166">takePicture()</text><polygon fill="#A80036" points="197.5,210.9082,187.5,214.9082,197.5,218.9082,193.5,214.9082" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="191.5" x2="538.5" y1="214.9082" y2="214.9082"/><line style="stroke:#A80036;stroke-width:1.0;" x1="711.5" x2="758.5" y1="239.2188" y2="239.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="758.5" x2="758.5" y1="239.2188" y2="252.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="717.5" x2="758.5" y1="252.2188" y2="252.2188"/><polygon fill="#A80036" points="727.5,248.2188,717.5,252.2188,727.5,256.2188,723.5,252.2188" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="723.5" y="234.4766">onCaptureSuccess</text><line style="stroke:#A80036;stroke-width:1.0;" x1="862.5" x2="852.5" y1="286.5293" y2="282.5293"/><line style="stroke:#A80036;stroke-width:1.0;" x1="862.5" x2="852.5" y1="286.5293" y2="290.5293"/><line style="stroke:#A80036;stroke-width:1.0;" x1="716.5" x2="863.5" y1="286.5293" y2="286.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="723.5" y="281.7871">getLastLocation()</text><polygon fill="#A80036" points="555.5,311.8398,545.5,315.8398,555.5,319.8398,551.5,315.8398" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="549.5" x2="705.5" y1="315.8398" y2="315.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="561.5" y="311.0977">goToAddAnimalMode()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="544.5" x2="586.5" y1="345.1504" y2="345.1504"/><line style="stroke:#A80036;stroke-width:1.0;" x1="586.5" x2="586.5" y1="345.1504" y2="358.1504"/><line style="stroke:#A80036;stroke-width:1.0;" x1="545.5" x2="586.5" y1="358.1504" y2="358.1504"/><line style="stroke:#A80036;stroke-width:1.0;" x1="545.5" x2="555.5" y1="358.1504" y2="354.1504"/><line style="stroke:#A80036;stroke-width:1.0;" x1="545.5" x2="555.5" y1="358.1504" y2="362.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="551.5" y="340.4082">post to UI thread</text><polygon fill="#A80036" points="699.5,368.1504,709.5,372.1504,699.5,376.1504,703.5,372.1504" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="539.5" x2="705.5" y1="372.1504" y2="372.1504"/><line style="stroke:#A80036;stroke-width:1.0;" x1="539.5" x2="581.5" y1="401.4609" y2="401.4609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="581.5" x2="581.5" y1="401.4609" y2="414.4609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="540.5" x2="581.5" y1="414.4609" y2="414.4609"/><polygon fill="#A80036" points="550.5,410.4609,540.5,414.4609,550.5,418.4609,546.5,414.4609" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="546.5" y="396.7188">showCapturedImage()</text><polygon fill="#A80036" points="197.5,439.7715,187.5,443.7715,197.5,447.7715,193.5,443.7715" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="191.5" x2="538.5" y1="443.7715" y2="443.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="203.5" y="439.0293">Remove</text><line style="stroke:#A80036;stroke-width:2.0;" x1="177.5" x2="195.5" y1="434.7715" y2="452.7715"/><line style="stroke:#A80036;stroke-width:2.0;" x1="177.5" x2="195.5" y1="452.7715" y2="434.7715"/><polygon fill="#A80036" points="452,469.082,442,473.082,452,477.082,448,473.082" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="446" x2="538.5" y1="473.082" y2="473.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="458" y="468.3398">Insert</text><rect fill="#FEFECE" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="156" x="285" y="451.7715"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="292" y="472.3066">AddAnimalFragment</text><line style="stroke:#A80036;stroke-width:1.0;" x1="864.5" x2="911.5" y1="509.5703" y2="509.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="911.5" x2="911.5" y1="509.5703" y2="522.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="870.5" x2="911.5" y1="522.5703" y2="522.5703"/><polygon fill="#A80036" points="880.5,518.5703,870.5,522.5703,880.5,526.5703,876.5,522.5703" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="876.5" y="504.8281">onSuccess()</text><polygon fill="#A80036" points="555.5,552.8809,545.5,556.8809,555.5,560.8809,551.5,556.8809" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="549.5" x2="858.5" y1="556.8809" y2="556.8809"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="561.5" y="552.1387">setLastLocation()</text><polygon fill="#A80036" points="852.5,566.8809,862.5,570.8809,852.5,574.8809,856.5,570.8809" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="539.5" x2="858.5" y1="570.8809" y2="570.8809"/><polygon fill="#A80036" points="351,596.1914,361,600.1914,351,604.1914,355,600.1914" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="28.5" x2="357" y1="600.1914" y2="600.1914"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="35.5" y="595.4492">Inputs animal name</text><polygon fill="#A80036" points="346,625.502,356,629.502,346,633.502,350,629.502" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="28.5" x2="352" y1="629.502" y2="629.502"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="35.5" y="624.7598">Presses enter</text><line style="stroke:#A80036;stroke-width:1.0;" x1="368" x2="410" y1="658.8125" y2="658.8125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="410" x2="410" y1="658.8125" y2="671.8125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="369" x2="410" y1="671.8125" y2="671.8125"/><polygon fill="#A80036" points="379,667.8125,369,671.8125,379,675.8125,375,671.8125" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="375" y="654.0703">onEnterPressed()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1021" x2="1011" y1="701.123" y2="697.123"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1021" x2="1011" y1="701.123" y2="705.123"/><line style="stroke:#A80036;stroke-width:1.0;" x1="363" x2="1022" y1="701.123" y2="701.123"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="370" y="696.3809">insertAnimal()</text><rect fill="#FFFFFF" height="40.6211" style="stroke:#000000;stroke-width:2.0;" width="155" x="976.5" y="709.123"/><polygon fill="#EEEEEE" points="976.5,709.123,1040.5,709.123,1040.5,716.123,1030.5,726.123,976.5,726.123,976.5,709.123" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="989.5" y="723.6914">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="980.5" y="742.6914">Sequence: InsertAnimal</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1023" x2="1070" y1="771.0547" y2="771.0547"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1070" x2="1070" y1="771.0547" y2="784.0547"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1029" x2="1070" y1="784.0547" y2="784.0547"/><polygon fill="#A80036" points="1039,780.0547,1029,784.0547,1039,788.0547,1035,784.0547" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="1035" y="766.3125">OnSuccess()</text><polygon fill="#A80036" points="379,814.3652,369,818.3652,379,822.3652,375,818.3652" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="373" x2="1017" y1="818.3652" y2="818.3652"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="385" y="813.623">goToInfoActivity()</text><polygon fill="#A80036" points="1011,828.3652,1021,832.3652,1011,836.3652,1015,832.3652" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="363" x2="1017" y1="832.3652" y2="832.3652"/><!--MD5=[4707e52409a433eef5ac1ffb7662501a]
@startuml animal_bank_take_photo_sequence
hide footbox
skinparam shadowing false
skinparam BoxPadding 10

Mainframe Sequence: Capture Animal


actor User
participant "CaptureImageFragment"
participant "AddAnimalFragment"
participant "CameraParentFragment"
participant "CameraX"
participant "FusedLocationProviderClient"
participant "Repository"


User->CaptureImageFragment : Clicks shutter button
activate CaptureImageFragment
CaptureImageFragment->CameraParentFragment : onCaptureImagePressed()
activate CameraParentFragment
CameraParentFragment->>CameraX:takePicture()
CaptureImageFragment<- -CameraParentFragment
deactivate CameraParentFragment
deactivate CaptureImageFragment


CameraX->CameraX: onCaptureSuccess
activate CameraX
CameraX->>FusedLocationProviderClient:getLastLocation()
CameraX->CameraParentFragment:goToAddAnimalMode()
activate CameraParentFragment
CameraParentFragment->>CameraParentFragment : post to UI thread
CameraX<- -CameraParentFragment
deactivate CameraParentFragment
deactivate CameraX


CameraParentFragment->CameraParentFragment:showCapturedImage()
CameraParentFragment->CaptureImageFragment !! : Remove
CameraParentFragment->AddAnimalFragment ** : Insert



FusedLocationProviderClient->FusedLocationProviderClient: onSuccess()
activate FusedLocationProviderClient
FusedLocationProviderClient->CameraParentFragment:setLastLocation()
activate CameraParentFragment
FusedLocationProviderClient<- -CameraParentFragment
deactivate CameraParentFragment
deactivate FusedLocationProviderClient

User->AddAnimalFragment : Inputs animal name
User->AddAnimalFragment : Presses enter
activate AddAnimalFragment
AddAnimalFragment->AddAnimalFragment: onEnterPressed()
AddAnimalFragment->>Repository:insertAnimal()

deactivate AddAnimalFragment

ref over Repository : Sequence: InsertAnimal

Repository->Repository: OnSuccess()
activate Repository
Repository->AddAnimalFragment:goToInfoActivity()
activate AddAnimalFragment
Repository<- -AddAnimalFragment
deactivate AddAnimalFragment
deactivate Repository


@enduml

PlantUML version 1.2021.00(Sun Jan 10 11:25:05 CET 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: da
Country: DK
--></g></svg>